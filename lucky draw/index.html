<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Login | Meemon</title>

  <link rel="stylesheet" href="./style.css">
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
  <main class="app">
    <h1>üîê Login</h1>
    <p class="sub">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ LINE ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏ã‡∏≠‡∏á</p>

    <button id="loginBtn">Login with LINE</button>
  </main>

  <script>
    const LIFF_ID = "PUT_YOUR_LIFF_ID_HERE"; // üî¥ ‡πÉ‡∏™‡πà LIFF ID

    async function main() {
      await liff.init({ liffId: LIFF_ID });

      if (!liff.isLoggedIn()) {
        document.getElementById("loginBtn").onclick = () => liff.login();
        return;
      }

      const profile = await liff.getProfile();

      localStorage.setItem("meemon_line_user", JSON.stringify({
        userId: profile.userId,
        name: profile.displayName,
        picture: profile.pictureUrl
      }));

      // Login ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚Üí ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏ã‡∏≠‡∏á
      window.location.href = "./draw.html";
    }

    main();
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>‡∏à‡∏∏‡∏î‡∏ò‡∏π‡∏õ‡∏Ç‡∏≠‡πÄ‡∏•‡∏Ç‡∏°‡∏á‡∏Ñ‡∏• - Meemon</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&family=Pattaya&display=swap" rel="stylesheet">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

  <!-- LIFF SDK -->
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

  <style>
    body {
      background: linear-gradient(to bottom, #0f0c29, #302b63, #24243e);
      color: white;
      font-family: 'Sarabun', sans-serif;
      min-height: 100vh;
      margin: 0;
    }
    .glass {
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.5);
    }
    .btn-gold {
      background: linear-gradient(45deg, #FFD700, #DAA520);
      color: #3e2723;
      font-weight: bold;
      border-radius: 12px;
      padding: 12px;
      width: 100%;
      cursor: pointer;
    }
    .view { display:none; }
    .view.active { display:flex; }
  </style>
</head>

<body class="flex items-center justify-center">

<!-- ===== LOGIN VIEW ===== -->
<div id="view-login" class="view active w-full max-w-sm p-6">
  <div class="glass p-8 text-center w-full">
    <img src="https://github.com/taithai-tai/meemon/blob/main/Picture/logo.png?raw=true"
         class="w-28 mx-auto mb-4"
         alt="logo">

    <h1 class="text-2xl font-bold text-yellow-400 mb-2 font-['Pattaya']">
      ‡∏°‡∏µ‡∏°‡∏ô‡∏ï‡πå ‡∏°‡∏´‡∏≤‡πÄ‡∏Æ‡∏á
    </h1>

    <p class="text-gray-300 text-sm mb-6">
      ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢ LINE ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏ï‡πâ‡∏°‡∏ö‡∏∏‡∏ç
    </p>

    <button id="btn-login" class="btn-gold">
      <i class="fa-brands fa-line mr-2"></i>
      ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ LINE
    </button>

    <p id="login-msg" class="text-xs text-gray-300 mt-4 min-h-[18px]"></p>
  </div>
</div>

<!-- ===== HOME VIEW ===== -->
<div id="view-home" class="view w-full max-w-md p-4">
  <div class="glass p-4 mb-4 flex justify-between items-center">
    <div>
      <div id="home-name" class="font-bold text-yellow-400">User</div>
      <div id="home-id" class="text-xs text-gray-300 truncate w-48">line_user_id</div>
    </div>
    <button id="btn-logout" class="text-xs text-red-300">
      ‡∏≠‡∏≠‡∏Å
    </button>
  </div>

  <div class="grid grid-cols-2 gap-4 mb-6">
    <div class="glass p-4 text-center">
      <div class="text-2xl">üí∞</div>
      <div class="text-xs text-gray-300">‡πÅ‡∏ï‡πâ‡∏°‡∏ö‡∏∏‡∏ç</div>
      <div class="text-2xl font-bold text-yellow-400">0</div>
    </div>
    <div class="glass p-4 text-center">
      <div class="text-2xl">üïØÔ∏è</div>
      <div class="text-xs text-gray-300">‡∏ò‡∏π‡∏õ</div>
      <div class="text-2xl font-bold">0</div>
    </div>
  </div>

  <div class="glass p-4 text-center text-sm text-gray-300">
    üîí ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô LIFF only  
    <br/>‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ï‡πâ‡∏° / ‡∏£‡πâ‡∏≤‡∏ô / ‡∏™‡∏•‡∏¥‡∏õ ‡∏à‡∏∞‡∏ï‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á
  </div>
</div>

<script>
/* =============================
   CONFIG
============================= */
const LIFF_ID = "2008685502-NdidvjVm";

/* =============================
   UI helpers
============================= */
function showView(id) {
  document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

/* =============================
   LIFF LOGIC
============================= */
async function initLIFF() {
  await liff.init({ liffId: LIFF_ID });

  if (liff.isLoggedIn()) {
    const profile = await liff.getProfile();
    document.getElementById("home-name").innerText = profile.displayName;
    document.getElementById("home-id").innerText = profile.userId;
    showView("view-home");
  } else {
    showView("view-login");
  }
}

async function login() {
  document.getElementById("login-msg").innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏≤‡πÑ‡∏õ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô LINE‚Ä¶";
  await liff.login({ redirectUri: window.location.href });
}

function logout() {
  if (liff.isLoggedIn()) liff.logout();
  location.reload();
}

/* =============================
   EVENTS
============================= */
document.getElementById("btn-login").onclick = login;
document.getElementById("btn-logout").onclick = logout;

window.onload = () => {
  initLIFF().catch(err => {
    console.error(err);
    alert("LIFF ERROR: " + err.message);
  });
};
</script>

</body>
</html>
